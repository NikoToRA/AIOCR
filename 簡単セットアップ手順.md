# 簡単セットアップ手順（5ステップ）

## 準備
以下がインストールされていることを確認：
- Xcode（最新版）
- Azure CLI（既にインストール済み）

## ステップ1: ツールのインストール
```bash
# Azure Functions Core Tools をインストール
brew tap azure/functions
brew install azure-functions-core-tools@4
```

## ステップ2: Azure にログインしてリソース作成
```bash
# Azure にログイン
az login

# リソースを自動作成
cd azure/functions/scripts
chmod +x provision.sh
./provision.sh
```
**📝 メモ**: 表示される Function App 名とキー情報を保存してください

## ステップ3: Azure OpenAI を作成
Azure Portal で手動作成：
1. 「Azure OpenAI」リソースを作成
2. モデル「gpt-4o」をデプロイ（デプロイ名: `gpt-4o`）
3. エンドポイントとキーをメモ

## ステップ4: Functions をデプロイ
```bash
# OpenAI 設定を追加（ステップ3の情報を使用）
FUNCTION_APP_NAME="your-function-app-name"  # ステップ2でメモした名前
az functionapp config appsettings set \
  -g koereq-ocr-rg -n $FUNCTION_APP_NAME \
  --settings \
  AZURE_OPENAI_ENDPOINT="https://your-openai.openai.azure.com/" \
  AZURE_OPENAI_KEY="your-openai-key"

# Functions をデプロイ
cd azure/functions
pip3 install -r requirements.txt
func azure functionapp publish $FUNCTION_APP_NAME

# Function Key を取得（メモしてください）
az functionapp keys list -g koereq-ocr-rg -n $FUNCTION_APP_NAME
```

## ステップ5: iOS アプリをセットアップ
1. **新しい Xcode プロジェクトを作成**
   - iOS App, SwiftUI, Product Name: `KoEReqOCR`

2. **ソースコードを追加**
   - `ios/KoEReqOCR/Sources/` フォルダを新プロジェクトにドラッグ&ドロップ

3. **Info.plist を更新**（ステップ4で取得した実際の値を使用）
   ```xml
   <key>NSCameraUsageDescription</key>
   <string>カメラで文書を撮影します</string>
   <key>NSPhotoLibraryAddUsageDescription</key>
   <string>撮影画像の保存に使用します</string>
   <key>AZURE_FUNCTIONS_BASE_URL</key>
   <string>https://your-function-app.azurewebsites.net/api</string>
   <key>AZURE_FUNCTIONS_KEY</key>
   <string>your-function-key</string>
   <key>AZURE_OPENAI_ENDPOINT</key>
   <string>https://your-openai.openai.azure.com</string>
   <key>AZURE_OPENAI_DEPLOYMENT</key>
   <string>gpt-4o</string>
   ```

4. **ビルド・実行してテスト**

## 完了！
これで Azure 連携の OCR アプリが動作します。

---

## 問題が発生した場合
詳細なガイドを参照：
- `あなたが行う作業.md`
- `AZURE_SETUP.md`